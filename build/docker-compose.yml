version: '3'
services:
    # Web- apache + php + laravel
    ku1-newsletter-admin-web:
        container_name: ku1-newsletter-admin-web
        build:
            context: web
            dockerfile: Dockerfile
        depends_on:
            - ku1-newsletter-admin-mysql
        volumes:
            -   ../:/usr/src/ku1-newsletter
        ports:
            -   80:80
    # Database
    ku1-newsletter-admin-mysql:
        container_name: ku1-newsletter-admin-mysql
        image: mysql
        restart: always
        environment:
            MYSQL_ROOT_PASSWORD: MYSQL_ROOT_PASSWORD
            MYSQL_DATABASE: ku1_newsletter
            MYSQL_USER: ku1-newsletter-user
            MYSQL_PASSWORD:
        ports:
            - 3326:3306

# Network to communicate with ku1-newsletter-messenger
networks:
    bridge:
        external: true